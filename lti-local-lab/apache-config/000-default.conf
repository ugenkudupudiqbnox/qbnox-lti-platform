<VirtualHost *:80>
	ServerAdmin webmaster@localhost

	# Bedrock DocumentRoot - MUST point to /web subdirectory
	DocumentRoot /var/www/pressbooks/web

	# Trust X-Forwarded-Proto from Nginx SSL reverse proxy.
	# This sets $_SERVER['HTTPS'] = 'on' in PHP so is_ssl() returns true,
	# which is required for correct auth cookie type selection (SECURE_AUTH_COOKIE)
	# and for WordPress to know it is operating over HTTPS.
	SetEnvIf X-Forwarded-Proto "https" HTTPS=on

	<Directory /var/www/pressbooks/web>
		Options Indexes FollowSymLinks
		AllowOverride All
		Require all granted
	</Directory>

	ErrorLog ${APACHE_LOG_DIR}/error.log
	CustomLog ${APACHE_LOG_DIR}/access.log combined
</VirtualHost>
